<% breadcrumb :maps_show %>
<div class="container">
  <h3 class="contents-title">é‡£ã‚Šå ´è©³ç´°</h3>
  <div class="blogs-index-item">
    <div class="map-title">
      <%= @map.title %>
    </div>

    <div class="map">
      <div id="map">
      </div>
    </div>

    <script>
      let circleBlue;
      let nRadiusHalfKm = 600;

      document.addEventListener("turbolinks:load", function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: {lat: <%= @map.latitude %>, lng: <%= @map.longitude %> },
          zoom: 13
        })

        circleBlue = new google.maps.Circle({
          strokeColor: "#3333FF",
          strokeOpacity: 1.0,
          strokeWeight: 2,
          fillColor: "#3333FF",
          fillOpacity: 0.35,
          map: map,
          draggable: false,
          center: {lat: <%= @map.latitude %>, lng: <%= @map.longitude %> },
          radius: nRadiusHalfKm
        })
      });
    </script>

    <%= link_to("ðŸ‘‰åœ°ç†é™¢åœ°å›³(ãƒ–ãƒ¬ã‚¤ã‚¯ãƒ©ã‚¤ãƒ³ã‚’è©³ã—ãè¦‹ã‚‹)", "#{@map.url}") %>
    
    <div class="map-content">
      <%= @map.content %>
    </div>
    <% if session[:user_id] %>
      <% if @map.user_id == @current_user.id %>
        <div class="post-menus">
          <%= link_to("æŠ•ç¨¿", "/maps/new") %>
          <%= link_to("ç·¨é›†", "/maps/#{@map.id}/edit") %>
          <%= link_to("å‰Šé™¤", "/maps/#{@map.id}/destroy", {method: "post"}) %>
        </div>
      <% end %>
    <% end %>
  </div>
  
  <div class="present">
    <% if @map.previous.present? %>
      <%= link_to(" å‰ã®è¨˜äº‹ ", "/maps/#{@map.previous.id}") %>
    <% end %>
    <%= link_to("| ä¸€è¦§ã«æˆ»ã‚‹ |", "/maps/index") %>
    <% if @map.next.present? %>
      <%= link_to(" æ¬¡ã®è¨˜äº‹ ", "/maps/#{@map.next.id}") %>
    <% end %>
  </div>
</div>